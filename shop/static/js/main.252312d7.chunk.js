(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{34:function(t,e,c){},36:function(t,e,c){},41:function(t,e,c){},42:function(t,e,c){},43:function(t,e,c){},45:function(t,e,c){},46:function(t,e,c){},47:function(t,e,c){},48:function(t,e,c){},49:function(t,e,c){},50:function(t,e,c){},51:function(t,e,c){},52:function(t,e,c){"use strict";c.r(e);var n=c(1),r=c(0),a=c.n(r),s=c(13),o=c.n(s),i=(c(34),c(17)),u=c(3),d=c(4),l=c(15),j=function(t){return Math.floor(100*t)/100},b=function(t,e){return Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every((function(c){return e.hasOwnProperty(c)&&t[c]===e[c]}))},m=Object(l.b)({name:"cart",initialState:{products:[]},reducers:{changeProducts:function(t,e){t.products=e.payload},addProduct:function(t,e){var c=t.products.find((function(t){return t.id===e.payload.id}));if(c)c.amount++;else{var n=Object(d.a)(Object(d.a)({},e.payload),{},{amount:1});t.products.push(n)}},deleteProductById:function(t,e){var c=t.products.findIndex((function(t){return t.id===e.payload}));c>=0&&t.products.splice(c,1)},incrementProductAmountById:function(t,e){var c=t.products.find((function(t){return t.id===e.payload}));c&&c.amount++},decrementProductAmountById:function(t,e){var c=t.products.find((function(t){return t.id===e.payload}));c&&(c.amount=Math.max(c.amount-1,1))}}}),p=m.actions,h=p.incrementProductAmountById,O=p.decrementProductAmountById,f=p.addProduct,x=p.deleteProductById,_=(p.changeProducts,function(t){return t.cart.products}),v=function(t){var e=t.cart.products.reduce((function(t,e){return t+e.price*e.amount}),0);return j(e)},N=function(t){var e=t.cart.products.reduce((function(t,e){return t+e.amount}),0);return j(e)},g=m.reducer,y=(c(36),c(5)),k=function(t){var e=Object(y.c)(N);return Object(n.jsx)("header",{className:"header container",children:Object(n.jsxs)("nav",{className:"header__content",children:[Object(n.jsx)(i.b,{className:"header__link",activeClassName:"header__link--active",exact:!0,to:"/",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"}),Object(n.jsxs)("span",{className:"header__cart",children:[Object(n.jsx)(i.b,{className:"header__link header__link--cart",activeClassName:"header__link--active",to:"/cart",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(n.jsx)("span",{className:"header__cart-amount",children:e})]})]})})},w=function(t){return Object(n.jsx)("footer",{className:"container"})},S=function(t){var e=t.children;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(k,{}),Object(n.jsx)("main",{children:e}),Object(n.jsx)(w,{}),Object(n.jsx)("div",{id:"modal-root"})]})},P=c(20),I=(c(41),a.a.forwardRef((function(t,e){var c=t.children,a=t.className,s=Object(P.a)(t,["children","className"]);return Object(r.useEffect)((function(){return document.title=c,function(){document.title="Shop"}}),[c]),Object(n.jsx)("h1",Object(d.a)(Object(d.a)({ref:e,className:"".concat(null!==a&&void 0!==a?a:""," title")},s),{},{children:c}))}))),C=(c(42),function(t){var e=t.children,c=t.className,r=Object(P.a)(t,["children","className"]);return Object(n.jsx)("button",Object(d.a)(Object(d.a)({className:"button ".concat(null!==c&&void 0!==c?c:"")},r),{},{children:e}))}),L=(c(43),function(t){var e=t.name,c=t.image,r=t.price,a=Object(y.b)();return Object(n.jsxs)("section",{className:"product",children:[Object(n.jsx)("p",{className:"product__image-wrapper",children:Object(n.jsx)("img",{className:"product__image",src:c,alt:e})}),Object(n.jsx)("h3",{className:"product__title",children:e}),Object(n.jsxs)("p",{className:"product__bottom",children:[Object(n.jsxs)("strong",{className:"product__price",children:[r,"$"]}),Object(n.jsx)(C,{onClick:function(){a(f(t))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]})}),E=function(t){return Object(n.jsx)("b",Object(d.a)(Object(d.a)({},t),{},{children:"loading..."}))},B=c(7),M=c.n(B),A=c(12),J=function(){var t=Object(A.a)(M.a.mark((function t(){var e;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://murmuring-tor-81614.herokuapp.com/api/goods/");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(){var t=Object(A.a)(M.a.mark((function t(e){var c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,fetch("https://murmuring-tor-81614.herokuapp.com/api/goods/?dealers=".concat(e.join()));case 4:return c=t.sent,t.abrupt("return",c.json());case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),D=function(t){return t.map((function(t,e){return Object(d.a)(Object(d.a)({},t),{},{image:"https://murmuring-tor-81614.herokuapp.com".concat(t.image),id:t.name+e})}))},F=Object(l.b)({name:"productList",initialState:{dealers:[],products:[],isLoading:!0,error:null},reducers:{setErrorStarus:function(t,e){t.error=e.payload},setLoadingStatus:function(t,e){t.isLoading=e.payload},setDealers:function(t,e){t.dealers=e.payload},changeProductsList:function(t,e){t.products=e.payload}}}),R=F.actions,q=R.changeProductsList,z=R.setErrorStarus,G=R.setLoadingStatus,H=R.setDealers,K=F.reducer,Q=function(t){return t.productsList.products},T=function(t){return t.productsList.error},U=function(){return function(){var t=Object(A.a)(M.a.mark((function t(e){var c,n;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,G(!0),t.next=4,J();case 4:c=t.sent,n=D(c),e(q(n)),e(z(null)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),z(t.t0.toString());case 13:return t.prev=13,G(!1),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[0,10,13,16]])})));return function(e){return t.apply(this,arguments)}}()},V=function(t){return function(){var e=Object(A.a)(M.a.mark((function e(c){var n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),e.next=4,$(t);case 4:n=e.sent,r=D(n),c(q(r)),c(z(null)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),z(e.t0.toString());case 13:return e.prev=13,G(!1),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})));return function(t){return e.apply(this,arguments)}}()},W=(c(45),function(){var t=Object(y.c)(Q),e=Object(y.c)(T),c=Object(y.b)();return Object(r.useEffect)((function(){c(function(){var t=Object(A.a)(M.a.mark((function t(e,c){var n,r;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=c(),(r=n.productsList).dealers.length>0?e(V(r.dealers)):e(U());case 2:case"end":return t.stop()}}),t)})));return function(e,c){return t.apply(this,arguments)}}())}),[c]),e?Object(n.jsx)(E,{}):Object(n.jsx)("ul",{className:"product-list",children:t.map((function(t){return Object(n.jsx)("li",{children:Object(n.jsx)(L,Object(d.a)({},t))},t.id)}))})}),X=function(){return Object(n.jsxs)("section",{className:"container",children:[Object(n.jsx)(I,{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d \u043e\u0442\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432!"}),Object(n.jsx)(W,{})]})},Y=c(19),Z=(c(46),function(t){var e=t.amount,c=t.increase,r=t.decrease;return Object(n.jsxs)("div",{className:"cart-counter",children:[Object(n.jsx)("button",{className:"cart-counter__button",onClick:r,children:"-"}),Object(n.jsx)("span",{className:"cart-counter__number",children:e}),Object(n.jsx)("button",{className:"cart-counter__button",onClick:c,children:"+"})]})}),tt=(c(47),a.a.memo((function(t){var e=t.name,c=t.amount,r=t.price,a=t.id,s=t.image,o=Object(y.b)();return Object(n.jsxs)("section",{className:"cart-product",children:[Object(n.jsx)("button",{className:"cart-product__delete",onClick:function(){return o(x(a))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(n.jsx)("p",{className:"cart-product__image-wrapper",children:Object(n.jsx)("img",{className:"cart-product__image",src:s,alt:e})}),Object(n.jsxs)("div",{className:"cart-product__content",children:[Object(n.jsx)("h3",{className:"cart-product__title",children:e}),Object(n.jsxs)("div",{className:"cart-product__bottom",children:[Object(n.jsxs)("strong",{className:"cart-product__price",children:["\u0426\u0435\u043d\u0430: ",r,"$"]}),Object(n.jsx)("div",{className:"cart-product__counter",children:Object(n.jsx)(Z,{amount:c,increase:function(){o(h(a))},decrease:function(){o(O(a))}})})]})]})]})}),b)),et=(c(48),function(t){var e=t.children;return Object(n.jsx)("span",{className:"visually-hidden",children:e})}),ct=(c(49),function(t){var e=t.isOpen,c=t.children,a=t.closeModal,o=Object(r.useState)(document.createElement("div")),i=Object(Y.a)(o,1)[0];return Object(r.useEffect)((function(){var t=document.getElementById("modal-root")||document.getElementById("root")||document.body;return t.appendChild(i),function(){t.removeChild(i)}}),[i]),Object(r.useEffect)((function(){return document.body.style.overflow=e?"hidden":"",function(){document.body.style.overflow=""}}),[e]),e?Object(s.createPortal)(Object(n.jsxs)("div",{className:"modal",children:[Object(n.jsx)("div",{className:"modal__shadow",onClick:a}),Object(n.jsxs)("div",{className:"modal__body",children:[c,Object(n.jsx)("button",{className:"modal__close-button",onClick:a,children:Object(n.jsx)(et,{children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u043a\u043d\u043e"})})]})]}),i):null}),nt=(c(50),function(){return Object(n.jsxs)("div",{className:"cart-modal",children:[Object(n.jsx)("h3",{className:"cart-modal__title",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0444\u043e\u0440\u043c\u043b\u0435\u043d!"}),Object(n.jsx)("p",{className:"cart-modal__text",children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0443"})]})}),rt=(c(51),function(t){var e=Object(r.useState)(!1),c=Object(Y.a)(e,2),a=c[0],s=c[1],o=Object(y.c)(_),i=Object(y.c)(v);return Object(n.jsx)("section",{className:"cart",children:0===o.length?Object(n.jsx)("p",{className:"cart__empty",children:"\u0412\u0430\u0448\u0430 \u043a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430."}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("ul",{className:"cart__list",children:o.map((function(t){return Object(n.jsx)("li",{className:"cart__item",children:Object(n.jsx)(tt,Object(d.a)({},t))},t.id)}))}),Object(n.jsx)("hr",{className:"cart__line"}),Object(n.jsx)("div",{className:"cart__bottom-wrapper",children:Object(n.jsxs)("div",{className:"cart__bottom",children:[Object(n.jsxs)("strong",{className:"cart__total",children:["\u0418\u0442\u043e\u0433\u043e: ",i,"$"]}),Object(n.jsx)(C,{className:"cart__button",onClick:function(){return s(!0)},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})}),Object(n.jsx)(ct,{isOpen:a,closeModal:function(){return s(!1)},children:Object(n.jsx)(nt,{})})]})})}),at=function(){return Object(n.jsxs)("section",{className:"container",children:[Object(n.jsx)(I,{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(n.jsx)(rt,{})]})};var st,ot,it=function(){return Object(n.jsx)(i.a,{children:Object(n.jsxs)(u.c,{children:[Object(n.jsx)(u.a,{path:"/",exact:!0,children:Object(n.jsx)(S,{children:Object(n.jsx)(X,{})})}),Object(n.jsx)(u.a,{path:"/cart",exact:!0,children:Object(n.jsx)(S,{children:Object(n.jsx)(at,{})})})]})})},ut=c(28),dt=c.n(ut),lt=JSON.parse(null!==(st=window.localStorage.getItem("localState"))&&void 0!==st?st:"null"),jt=Object(l.a)({reducer:{cart:g,productsList:K},preloadedState:null!==lt&&void 0!==lt?lt:void 0});jt.subscribe(dt()((function(){var t=JSON.stringify(jt.getState());window.localStorage.setItem("localState",t)}),250)),ot&&jt.dispatch(H(ot)),o.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(y.a,{store:jt,children:Object(n.jsx)(it,{})})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.252312d7.chunk.js.map